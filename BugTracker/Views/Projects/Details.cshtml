@model BugTracker.Models.Project

@{
    ViewBag.Title = "Details";
}

<div class="col-md-6 subnav">
    <h1>Project: @Model.Title</h1>
</div>
<div class="col-md-6 subnav">
    <div class="admin-btns">
        @Html.ActionLink("Assign Users", "AssignUsers", new { id = Model.Id }, new { @class = "action-btn" })
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "action-btn" })
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h3>Deadline: @Model.Deadline.ToString("MMMM dd, yyyy h:mm t")M</h3>
            <p>@Model.Description</p>
        </div>

    </div>
    <div class="row content">
        <div class="col-md-3">
            <h3>Tickets</h3>
        </div>
        <div class="col-md-3">
            @if (ViewContext.HttpContext.User.IsInRole("Submitter"))
            {
                @Html.ActionLink("New Ticket", "Create", "Tickets", new { id = Model.Id }, new { @class = "btn btn-default" })
            }
        </div>
    <div class="row">
        <div class="col-md-12 content">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>
                            Title
                        </th>
                        <th>
                            Created
                        </th>
                        <th>
                           Type
                        </th>
                        <th>
                            Priority
                        </th>
                        <th>
                            Status
                        </th>
                        <th>
                            Owner
                        </th>
                    </tr>
                </thead>

                <tbody>
                    @{ var Tickets = Model.Tickets; }
                    @foreach (var ticket in Tickets) {
                    <tr>
                        <td>
                            @Html.ActionLink(ticket.Title, "Details", "Tickets", new { id = ticket.Id }, null)
                        </td>
                        <td>
                            @ticket.Created.ToString("MMMM dd, yyyy")
                        </td>
                        <td>
                            @ticket.Type.Name
                        </td>
                        <td>
                            @ticket.Priority
                        </td>
                        <td>
                            @ticket.Status
                        </td>
                        <td>
                            @if (ticket.Assignee != null) { @ticket.Assignee.FullName } else { <span class="text-danger">Unassigned</span> }
                        </td>
                    </tr>
                    }

                </tbody>

            </table>




        </div>
    </div>
    </div>
</div>
